<main transition-style="in:wipe:down">
<article>
<div><div class="article_title"><h4 style="text-align: center">学习 CMAKE 笔记</h4></div></div><ul><li><a href="#target-3fe25f53-e636-434a-b47b-dd1b6212e892">CMake</a></li><li><a href="#target-5ced8b95-eb30-48be-ab8a-134858f80599">设置工程名</a></li><li><a href="#target-ca01b305-d3c7-40e5-b899-6b629477f364">定义变量</a></li><li><a href="#target-00c2eabb-7143-48eb-ba16-5e61878f59a9">搜索文件</a></li><li><a href="#target-ecfe9cd5-15e9-4079-a33a-d1c35d139fc0">编译、链接静态库</a></li><li><a href="#target-0cca4cf3-00d0-47bd-bd56-36a4b772e853">编译、链接动态库</a></li><li><a href="#target-8ab5c9d8-babc-452f-9fa2-b0fdb5dfca4b">预定义宏</a></li><li><a href="#target-10e35415-d4f7-4bf1-842f-fc6d247e45ae">自定义宏</a></li><li><a href="#target-9038050c-603d-48c5-90cb-e75c6ffeb344">资源链接</a></li></ul><h3 id="target-3fe25f53-e636-434a-b47b-dd1b6212e892">CMake</h3><ul><li><p>CMake是一个跨平台的项目构建工具。<br></p></li></ul><h3 id="target-5ced8b95-eb30-48be-ab8a-134858f80599">设置工程名</h3><pre><code class="language-cmake"><span>
</span><span>project("demo"</span><span>)</span><span>
</span></code></pre><h3 id="target-ca01b305-d3c7-40e5-b899-6b629477f364">定义变量</h3><pre><code class="language-cmake"><span>
</span><span>set(SRC</span><span>_</span><span>LIST ${SOURCE}</span><span>)</span><span>
</span></code></pre><h3 id="target-00c2eabb-7143-48eb-ba16-5e61878f59a9">搜索文件</h3><pre><code class="language-cmake"><span>
</span><span>aux</span><span>_</span><span>source</span><span>_</span><span>directory(${PROJECT</span><span>_</span><span>SOURCE</span><span>_</span><span>DIR}/src/ SOURCE</span><span>_</span><span>FILES</span><span>)</span><span> </span><span>#</span><span>1</span><span>
</span><span>file(GLOB CLAC</span><span>_</span><span>LIST ${CMAKE</span><span>_</span><span>CURRENT</span><span>_</span><span>SOURCE</span><span>_</span><span>DIR}/calc/</span><span>*</span><span>.cpp</span><span>)</span><span> </span><span>#</span><span>1</span><span>
</span></code></pre><h3 id="target-ecfe9cd5-15e9-4079-a33a-d1c35d139fc0">编译、链接静态库</h3><pre><code class="language-cmake"><span>
</span><span>add</span><span>_</span><span>library(calc STATIC ${CLAC</span><span>_</span><span>LIST}</span><span>)</span><span>
</span><span>link</span><span>_</span><span>directories(${PROJECT</span><span>_</span><span>SOURCE</span><span>_</span><span>DIR}/lib</span><span>)</span><span>
</span><span>link</span><span>_</span><span>libraries(calc</span><span>)</span><span>
</span></code></pre><h3 id="target-0cca4cf3-00d0-47bd-bd56-36a4b772e853">编译、链接动态库</h3><pre><code class="language-cmake"><span>
</span><span>set(LIBRARY</span><span>_</span><span>OUTPUT</span><span>_</span><span>PATH ${PROJECT</span><span>_</span><span>SOURCE</span><span>_</span><span>DIR}/lib</span><span>)</span><span>
</span><span>add</span><span>_</span><span>library(calc SHARED ${CLAC</span><span>_</span><span>LIST}</span><span>)</span><span>
</span><span>target</span><span>_</span><span>link</span><span>_</span><span>libraries(${TARGET</span><span>_</span><span>NAME} calc</span><span>)</span><span>
</span></code></pre><h3 id="target-8ab5c9d8-babc-452f-9fa2-b0fdb5dfca4b">预定义宏</h3><table><thead><th style="text-align:left">宏</th><th style="text-align:center">描述</th></thead><tbody><tr><td style="text-align:left">PROJECT_SOURCE_DIR</td><td style="text-align:center">使用cmake命令后紧跟的目录，一般是工程的根目录</td></tr><tr><td style="text-align:left">PROJECT_BINARY_DIR</td><td style="text-align:center">执行cmake命令的目录</td></tr><tr><td style="text-align:left">CMAKE_CURRENT_SOURCE_DIR</td><td style="text-align:center">当前处理的CMakeLists.txt所在的路径</td></tr><tr><td style="text-align:left">CMAKE_CURRENT_BINARY_DIR</td><td style="text-align:center">target 编译目录</td></tr><tr><td style="text-align:left">EXECUTABLE_OUTPUT_PATH</td><td style="text-align:center">重新定义目标二进制可执行文件的位置</td></tr><tr><td style="text-align:left">LIBRARY_OUTPUT_PATH	</td><td style="text-align:center">重新定义目标链接库文件的位置</td></tr><tr><td style="text-align:left">PROJECT_NAME	</td><td style="text-align:center">返回通过PROJECT定义的项目名称</td></tr><tr><td style="text-align:left">CMAKE_BINARY_DIR	</td><td style="text-align:center">项目构建路径，假设在build目录进行的构建，那么得到build目录的路径</td></tr></tbody></table><h3 id="target-10e35415-d4f7-4bf1-842f-fc6d247e45ae">自定义宏</h3><pre><code class="language-cmake"><span>
</span><span>#</span><span> </span><span>自定义 DEBUG 宏</span><span>
</span><span>add</span><span>_</span><span>definitions(-DDEBUG</span><span>)</span><span>
</span><span>
</span><span>#</span><span>ifdef DEBUG</span><span>
</span><span> </span><span> </span><span> </span><span> </span><span>printf("debug...</span><span>\</span><span>n"</span><span>)</span><span>;</span><span>
</span><span>#</span><span>endif</span><span>
</span></code></pre><h3 id="target-9038050c-603d-48c5-90cb-e75c6ffeb344">资源链接</h3><a href="https://subingwen.cn/cmake/CMake-primer/">https://subingwen.cn/cmake/CMake-primer/</a></article>
</main>